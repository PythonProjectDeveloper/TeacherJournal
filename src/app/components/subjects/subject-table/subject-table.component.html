<h2 class="title"> {{ formJournal?.subject?.name | titlecase }} </h2>

<div class="table-wrapper">
  <table class="mat-elevation-z8 table-wrapper__table">
    <tr class="table-wrapper__row">
      <th class="table-wrapper__header-cell table-wrapper__static-cell"> {{ 'fields.firstName' | translate }} </th>
      <th class="table-wrapper__header-cell table-wrapper__static-cell"> {{ 'fields.lastName' | translate }} </th>
      <th class="table-wrapper__header-cell table-wrapper__static-cell"> {{ 'fields.averageMark' | translate }} </th>
      <th class="table-wrapper__header-cell table-wrapper__input-wrapper" *ngFor="let day of formJournal?.days; let dayIndex = index"> 
        <input
          class="table-wrapper__header-cell-input"
          type="text"
          [(ngModel)]="day.name"
          (blur)='setSaveButtonVision()'
          appFocusHighlight="table-wrapper__header-cell-input__focus"
        >
        <button class="table-wrapper__remove-button" mat-icon-button (click)="onRemoveColumn(dayIndex)">
          <mat-icon>delete</mat-icon>
        </button>
      </th>
    </tr>
    <tr
      *ngFor="let student of formJournal?.students; let studentIndex = index"
      class="table-wrapper__row"
      [appAverageMarkHighlight]="getStudentMarks(student._id, formJournal?.days) | average | number:'1.1-1'"
      [averageMarkColors]="averageMarkColors"
    >
      <td class="table-wrapper__simple-cell"> {{ student.firstName }} </td>
      <td class="table-wrapper__simple-cell"> {{ student.lastName }} </td>
      <td class="table-wrapper__simple-cell"> {{ getStudentMarks(student._id, formJournal?.days) | average | number:'1.1-1' }} </td>
      <td class="table-wrapper__simple-cell table-wrapper__input-wrapper" *ngFor="let day of formJournal?.days">
        <input
          class="table-wrapper__simple-cell-input"
          type="text"
          [(ngModel)]="day.marks[studentIndex].value"
          (blur)='setSaveButtonVision()'
          appNumberCheck
          [maxNumber]="10"
          [minNumber]="0"
          appFocusHighlight="table-wrapper__simple-cell-input__focus"
        >
      </td>
    </tr>
  </table>
  <button class="add-button" mat-mini-fab color="primary" (click)="onAddColumn()" *ngIf="formJournal?.isValid()">
    <mat-icon>add</mat-icon>
  </button>
</div>

<button mat-stroked-button color="primary" *ngIf="isTableDataChanged" (click)="onSave()"> {{ 'actions.save' | translate }} </button>
